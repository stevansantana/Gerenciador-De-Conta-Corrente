<div class="login-page">
  <div class="login-container">
    <% if flash[:notice] %>
      <div class="alert alert-success">
        <%= flash[:notice] %>
      </div>
    <% end %>

    <% if flash[:alert] %>
      <div class="alert alert-danger">
        <%= flash[:alert] %>
      </div>
    <% end %>

    <div class="login-header">
      <h1>Acesse sua conta</h1>
      <p>Informe suas credenciais para continuar</p>
    </div>

    <%= form_with url: login_path, local: true, data: { turbo: false }, class: "login-form" do |form| %>

      <div class="form-group">
        <%= form.label :conta_corrente %>
        <%= form.text_field :conta_corrente,
          class: "form-control",
          required: true,
          pattern: "\\d{5}",
          inputmode: "numeric",
          maxlength: 5,
          minlength: 5,
          title: "A conta corrente deve conter exatamente 5 dígitos numéricos" %>
      </div>

      <div class="form-group">
        <%= form.label :senha %>
        <%= form.password_field :senha,
          class: "form-control",
          required: true,
          pattern: "\\d{4}",
          inputmode: "numeric",
          maxlength: 4,
          minlength: 4,
          title: "A senha deve conter exatamente 4 dígitos numéricos" %>
      </div>

      <%= form.submit "Entrar", class: "btn-primary" %>
    <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const notice = document.querySelector('.alert-success');
    if (notice) {
      setTimeout(() => {
        notice.style.opacity = '0';
        setTimeout(() => notice.remove(), 1000);
      }, 5000);
    }

    const alert = document.querySelector('.alert-danger');
    if (alert) {
      setTimeout(() => {
        alert.style.opacity = '0';
        setTimeout(() => alert.remove(), 1000);
      }, 5000);
    }
  });
</script>